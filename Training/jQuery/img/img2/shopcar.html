<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>购物车</title>

    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <style media="screen">
      h3{
        text-align: center;
      }
      .product{
        margin: 10px 10px 10px 0;
        border: 1px solid black;
      }
      .product em{
        color: pink;
        font-weight: bold;
        font-size: 26px;
      }
      .shopCart{
        position: fixed;
        top: 20px;
        right: 0;
      }
      .shopCart img{
        width: 80px;
        height: 80px;
      }
      .shopCart .shopNum{
        display: block;
        width: 21px;
        height: 21px;
        border-radius: 50%;
        background-color: pink;
        text-align: center;
        position: absolute;
        top: 0;
        right: 30px;
      }
    </style>


  </head>
  <body>
    <h3>本次练习中用到Bootstrap、jQuery</h3>
    <div class="container">
      <div class="row">
        <div class="col-md-3 product">
          <p>
            <img src="img/1.jpg" alt="" class="img-responsive"/>
          </p>
          <p>
            台湾杨桃 果肉脆滑 酸甜可口
          </p>
          <p>
            Price:<em class="price">￥24.00</em>
          </p>
          <p>
            <button type="button" class="btn btn-primary btn-small addCar">加入到购物车</button>
          </p>
        </div>

        <div class="col-md-3 product">
          <p>
            <img src="img/2.jpg" alt="" class="img-responsive"/>
          </p>
          <p>
            山东精品红富士 清脆可口 新鲜多汁
          </p>
          <p>
            Price:<em class="price">￥79.00</em>
          </p>
          <p>
            <button type="button" class="btn btn-primary btn-small addCar">加入到购物车</button>
          </p>
        </div>

        <div class="col-md-3 product">
          <p>
            <img src="img/3.jpg" alt="" class="img-responsive"/>
          </p>
          <p>
            墨西哥进口牛油果 森林奶油 粮食水果
          </p>
          <p>
            Price:<em class="price">￥29.90</em>
          </p>
          <p>
            <button type="button" class="btn btn-primary btn-small addCar">加入到购物车</button>
          </p>
        </div>

        <div class="col-md-3 product">
          <p>
            <img src="img/4.jpg" alt="" class="img-responsive"/>
          </p>
          <p>
            佳沛新西兰阳光金奇异果大果 质地细腻 甜蜜多汁
          </p>
          <p>
            Price:<em class="price">￥258.00</em>
          </p>
          <p>
            <button type="button" class="btn btn-primary btn-small addCar">加入到购物车</button>
          </p>
        </div>

        <div class="col-md-3 product">
          <p>
            <img src="img/5.jpg" alt="" class="img-responsive"/>
          </p>
          <p>
            越南进口红心火龙果 富含花青素 皮薄味甜
          </p>
          <p>
            Price:<em class="price">￥59.90</em>
          </p>
          <p>
            <button type="button" class="btn btn-primary btn-small addCar">加入到购物车</button>
          </p>
        </div>

        <div class="col-md-3 product">
          <p>
            <img src="img/6.jpg" alt="" class="img-responsive"/>
          </p>
          <p>
            泰国椰青整箱装 椰汁清甜沁心 椰肉香软滑嫩
          </p>
          <p>
            Price:<em class="price">￥86.00</em>
          </p>
          <p>
            <button type="button" class="btn btn-primary btn-small addCar">加入到购物车</button>
          </p>
        </div>

        <div class="col-md-3 product">
          <p>
            <img src="img/7.jpg" alt="" class="img-responsive"/>
          </p>
          <p>
            西州蜜 质地细腻，营养多汁
          </p>
          <p>
            Price:<em class="price">￥48.00</em>
          </p>
          <p>
            <button type="button" class="btn btn-primary btn-small addCar">加入到购物车</button>
          </p>
        </div>

        <div class="col-md-3 product">
          <p>
            <img src="img/8.jpg" alt="" class="img-responsive"/>
          </p>
          <p>
            澳洲新奇士橙 质地细腻 酸甜多汁
          </p>
          <p>
            Price:<em class="price">￥78.00</em>
          </p>
          <p>
            <button type="button" class="btn btn-primary btn-small addCar">加入到购物车</button>
          </p>
        </div>

        <div class="col-md-3 product">
          <p>
            <img src="img/9.jpg" alt="" class="img-responsive"/>
          </p>
          <p>
            蒙自石榴 饱满水润 健康美味
          </p>
          <p>
            Price:<em class="price">￥32.80</em>
          </p>
          <p>
            <button type="button" class="btn btn-primary btn-small addCar">加入到购物车</button>
          </p>
        </div>

      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="shopCart">
          <img src="img/cart.jpg" alt="" class="img-responsive"/>
          <span class="shopNum">0</span>
        </div>
      </div>
    </div>


    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>

    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      $(function(){
        //必须将该语句移到点击事件的外面，否则每次点击cartNum都会被重置为0
        var cartNum = 0;
        $(".addCar").on("click",function(){
          //找到图片位置
          var addImg = $(this).parent().parent(".product").find("img").eq(0);
          //克隆图片，并设定克隆图片的样式
          var cloneImg = addImg.clone();
          var shopCart = $(".shopCart");
/*          cloneImg.css({
            "width":"250px",
            "height":"250px",
            "position":"absolute",
            //把克隆图片定位到父级图片上
            "top":addImg.offset().top,
            "left":addImg.offset().left,
            "z-index":"1000px",
            "opacity":"0.7"
          });
          cloneImg.appendTo($("body")).animate({
            "width":"50px",
            "height":"50px",
            "top":shopCart.offset().top,
            "left":shopCart.offset().left
          },2000,function(){
            cloneImg.animate({
              "width":0,
              "height":0
            },function(){
              $(".shopNum").html(++cartNum);
              $(this).detach();
            });
          });   */

          cloneImg.css({
            "width":"250px",
            "height":"250px",
            "position":"absolute",
            //把克隆图片定位到父级图片上
            "top":addImg.offset().top,
            "left":addImg.offset().left,
            "z-index":"1000px",
            "opacity":"0.7"
          }).appendTo($("body")).animate({
            "width":"50px",
            "height":"50px",
            "top":shopCart.offset().top,
            "left":shopCart.offset().left
          },3000,function(){
            cloneImg.animate({
              "width":0,
              "height":0
            },function(){
              $(".shopNum").html(++cartNum);
              $(this).detach();
            });
          });
        });
      });
    </script>


  </body>
</html>
